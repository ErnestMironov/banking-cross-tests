# Анализ функциональности банковского сервиса
## Тестировщик: Миронов Эрнест Арвович

### Конфигурация тестового окружения
- **Сервер**: localhost:8000
- **База данных**: PostgreSQL 14.5
- **Версия Node.js**: 18.15.0
- **Версия React**: 18.2.0
- **Браузеры**: 
  - Chrome 137.0.0.0
  - Firefox 115.0.0
  - Safari 16.6

### Тестовые данные
```json
{
  "balance": 30000,
  "reserved": 20001,
  "cardNumber": "1234567890123456",
  "transferAmount": 5000
}
```

## Тест-кейсы

### TC-001: Валидация отображения баланса
**ID**: TC-001
**Тип**: Функциональный
**Приоритет**: P0
**Статус**: Новый

#### Предусловия
1. Сервер запущен и доступен
2. База данных синхронизирована
3. Сеть стабильна (ping < 50ms)
4. Кэш браузера очищен

#### Шаги выполнения
```bash
# Шаг 1: Инициализация
curl -X GET "http://localhost:8000/?balance=30000&reserved=20001"

# Шаг 2: Проверка баланса
GET /api/balance
Expected: {"total": 30000, "reserved": 20001, "available": 9999}

# Шаг 3: Валидация форматирования
GET /api/format
Expected: {"separator": " ", "currency": "руб"}
```

#### Ожидаемый результат
| Поле | Ожидаемое значение | Фактическое значение | Статус |
|------|-------------------|---------------------|---------|
| Баланс | 30,000 руб | | |
| Резерв | 20,001 руб | | |
| Доступно | 9,999 руб | | |

#### Логи
```log
[2024-03-20 10:00:00] INFO: Тест начат
[2024-03-20 10:00:01] INFO: Запрос баланса выполнен
[2024-03-20 10:00:02] INFO: Валидация форматирования
```

#### Примечания
- Проверено в Chrome DevTools
- Network tab: все запросы < 200ms
- Console: ошибок нет
- Performance: FCP < 1s

### TC-002: Валидация номера карты - корректный номер
**Приоритет**: Высокий  
**Предусловия**: Открыто меню перевода

**Шаги**:
1. Нажать на рублёвый счёт
2. Ввести корректный номер карты: 1234567890123456
3. Нажать подтвердить

**Ожидаемый результат**: Открывается меню ввода суммы

**Статус**: 

---

### TC-003: Валидация номера карты - некорректный номер (менее 16 цифр)
**Приоритет**: Высокий  
**Предусловия**: Открыто меню ввода номера карты

**Шаги**:
1. Ввести номер карты с менее чем 16 цифрами: 12345
2. Попытаться подтвердить

**Ожидаемый результат**: Ошибка валидации, переход к следующему шагу не происходит

**Статус**: 

---

### TC-004: Перевод с комиссией - успешный перевод
**Приоритет**: Высокий  
**Предусловия**: Доступная сумма 9,999 руб

**Шаги**:
1. Ввести корректный номер карты: 1234567890123456
2. Ввести сумму перевода: 5000
3. Проверить расчёт комиссии (500 руб, 10%)
4. Проверить, что общая сумма (5500) не превышает доступную
5. Нажать "Перевести"

**Ожидаемый результат**: 
- Комиссия: 500 руб
- К списанию: 5500 руб
- Появляется кнопка "Перевести"
- После нажатия: уведомление о принятии запроса

**Статус**: 

---

### TC-005: Перевод - превышение доступной суммы
**Приоритет**: Высокий  
**Предусловия**: Доступная сумма 9,999 руб

**Шаги**:
1. Ввести корректный номер карты: 1234567890123456
2. Ввести сумму перевода: 9500
3. Проверить расчёт: сумма + комиссия = 9500 + 950 = 10450 руб
4. Убедиться, что 10450 > 9999 (доступная сумма)

**Ожидаемый результат**: 
- Появляется сообщение о невозможности перевода
- Кнопка "Перевести" не отображается

**Статус**: 

## Найденные дефекты

### Bug-001: Поле номера карты принимает 17 цифр вместо 16
**Серьёзность**: Средняя
**Приоритет**: Средний
**Статус**: Новый

**Описание**: Поле ввода номера карты принимает 17 цифр вместо стандартных 16, что нарушает валидацию банковских карт.

**Шаги воспроизведения**:
1. Открыть http://localhost:8000/?balance=30000&reserved=20001
2. Нажать на карточку "Рубли"
3. Ввести номер карты: 12345678901234567 (17 цифр)
4. Проверить отображение в поле

**Ожидаемый результат**: Поле должно принимать максимум 16 цифр

**Фактический результат**: Поле принимает 17 цифр и отображает "1234 5678 9012 3456 7"

**Окружение**: Chrome 137, macOS

---

### Bug-002: Неправильный расчёт комиссии для малых сумм
**Серьёзность**: Высокая
**Приоритет**: Высокий  
**Статус**: Новый

**Описание**: Комиссия неправильно рассчитывается для сумм меньше 100 рублей - показывается 0 вместо правильного значения.

**Шаги воспроизведения**:
1. Ввести корректный номер карты: 1234567890123456
2. Ввести сумму перевода: 55 рублей
3. Проверить отображение комиссии

**Ожидаемый результат**: Комиссия должна быть 5 рублей (55 * 10% = 5.5, округление вниз = 5)

**Фактический результат**: Комиссия отображается как 0 рублей

**Окружение**: Chrome 137, macOS 